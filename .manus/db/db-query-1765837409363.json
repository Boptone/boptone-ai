{
  "query": "\nCREATE TABLE IF NOT EXISTS fan_memberships (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  tier ENUM('basic', 'member', 'executive') DEFAULT 'basic' NOT NULL,\n  annualFee DECIMAL(10, 2) DEFAULT 0.00,\n  cashbackRate DECIMAL(5, 4) DEFAULT 0.0000,\n  startDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  renewalDate TIMESTAMP NULL,\n  status ENUM('active', 'expired', 'canceled') DEFAULT 'active' NOT NULL,\n  stripeSubscriptionId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (userId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS artist_backing (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  artistProfileId INT NOT NULL,\n  monthlyAmount DECIMAL(10, 2) NOT NULL,\n  tier ENUM('backer', 'patron', 'investor') DEFAULT 'backer' NOT NULL,\n  revenueSharePercent DECIMAL(5, 4) DEFAULT 0.0000,\n  status ENUM('active', 'paused', 'canceled') DEFAULT 'active' NOT NULL,\n  startDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  nextBillingDate TIMESTAMP NULL,\n  totalContributed DECIMAL(12, 2) DEFAULT 0.00,\n  stripeSubscriptionId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS backing_transactions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  artistProfileId INT,\n  type ENUM('backing', 'merch', 'kickin', 'tickets', 'exclusive_content', 'other') NOT NULL,\n  amount DECIMAL(10, 2) NOT NULL,\n  artistShare DECIMAL(10, 2) NOT NULL,\n  platformShare DECIMAL(10, 2) NOT NULL,\n  cashbackEligible BOOLEAN DEFAULT TRUE NOT NULL,\n  cashbackAmount DECIMAL(10, 2) DEFAULT 0.00,\n  description TEXT,\n  stripePaymentId VARCHAR(255),\n  year INT NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS cashback_rewards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  year INT NOT NULL,\n  totalEligibleSpending DECIMAL(12, 2) NOT NULL,\n  cashbackRate DECIMAL(5, 4) NOT NULL,\n  cashbackAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid', 'expired') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  stripePayoutId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS artist_dividends (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  artistProfileId INT NOT NULL,\n  year INT NOT NULL,\n  totalEarnings DECIMAL(12, 2) NOT NULL,\n  dividendRate DECIMAL(5, 4) NOT NULL,\n  dividendAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  stripePayoutId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS investor_revenue_share (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  backingId INT NOT NULL,\n  fanUserId INT NOT NULL,\n  artistProfileId INT NOT NULL,\n  year INT NOT NULL,\n  artistTotalEarnings DECIMAL(12, 2) NOT NULL,\n  sharePercent DECIMAL(5, 4) NOT NULL,\n  shareAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (backingId) REFERENCES artist_backing(id),\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2SKEMaxYovcAzrR.root --database nTbKjjzazhRpeJn9kKuXdQ --execute \nCREATE TABLE IF NOT EXISTS fan_memberships (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT NOT NULL,\n  tier ENUM('basic', 'member', 'executive') DEFAULT 'basic' NOT NULL,\n  annualFee DECIMAL(10, 2) DEFAULT 0.00,\n  cashbackRate DECIMAL(5, 4) DEFAULT 0.0000,\n  startDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  renewalDate TIMESTAMP NULL,\n  status ENUM('active', 'expired', 'canceled') DEFAULT 'active' NOT NULL,\n  stripeSubscriptionId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (userId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS artist_backing (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  artistProfileId INT NOT NULL,\n  monthlyAmount DECIMAL(10, 2) NOT NULL,\n  tier ENUM('backer', 'patron', 'investor') DEFAULT 'backer' NOT NULL,\n  revenueSharePercent DECIMAL(5, 4) DEFAULT 0.0000,\n  status ENUM('active', 'paused', 'canceled') DEFAULT 'active' NOT NULL,\n  startDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  nextBillingDate TIMESTAMP NULL,\n  totalContributed DECIMAL(12, 2) DEFAULT 0.00,\n  stripeSubscriptionId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS backing_transactions (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  artistProfileId INT,\n  type ENUM('backing', 'merch', 'kickin', 'tickets', 'exclusive_content', 'other') NOT NULL,\n  amount DECIMAL(10, 2) NOT NULL,\n  artistShare DECIMAL(10, 2) NOT NULL,\n  platformShare DECIMAL(10, 2) NOT NULL,\n  cashbackEligible BOOLEAN DEFAULT TRUE NOT NULL,\n  cashbackAmount DECIMAL(10, 2) DEFAULT 0.00,\n  description TEXT,\n  stripePaymentId VARCHAR(255),\n  year INT NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS cashback_rewards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  fanUserId INT NOT NULL,\n  year INT NOT NULL,\n  totalEligibleSpending DECIMAL(12, 2) NOT NULL,\n  cashbackRate DECIMAL(5, 4) NOT NULL,\n  cashbackAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid', 'expired') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  stripePayoutId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (fanUserId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS artist_dividends (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  artistProfileId INT NOT NULL,\n  year INT NOT NULL,\n  totalEarnings DECIMAL(12, 2) NOT NULL,\n  dividendRate DECIMAL(5, 4) NOT NULL,\n  dividendAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  stripePayoutId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n\nCREATE TABLE IF NOT EXISTS investor_revenue_share (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  backingId INT NOT NULL,\n  fanUserId INT NOT NULL,\n  artistProfileId INT NOT NULL,\n  year INT NOT NULL,\n  artistTotalEarnings DECIMAL(12, 2) NOT NULL,\n  sharePercent DECIMAL(5, 4) NOT NULL,\n  shareAmount DECIMAL(10, 2) NOT NULL,\n  status ENUM('pending', 'calculated', 'paid') DEFAULT 'pending' NOT NULL,\n  paidAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (backingId) REFERENCES artist_backing(id),\n  FOREIGN KEY (fanUserId) REFERENCES users(id),\n  FOREIGN KEY (artistProfileId) REFERENCES artist_profiles(id)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 5237
}