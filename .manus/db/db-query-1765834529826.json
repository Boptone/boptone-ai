{
  "query": "\n-- Fans table\nCREATE TABLE IF NOT EXISTS fans (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  artistId INT NOT NULL,\n  email VARCHAR(320),\n  phone VARCHAR(20),\n  name VARCHAR(255),\n  location VARCHAR(255),\n  country VARCHAR(2),\n  city VARCHAR(100),\n  discoverySource ENUM('spotify_playlist', 'spotify_algorithm', 'spotify_search', 'apple_music_playlist', 'apple_music_algorithm', 'apple_music_search', 'youtube', 'tiktok', 'instagram', 'twitter', 'facebook', 'friend_recommendation', 'live_show', 'radio', 'podcast', 'blog_press', 'shazam', 'bandcamp', 'soundcloud', 'other'),\n  discoveryDetail TEXT,\n  funnelStage ENUM('discovered', 'follower', 'engaged', 'customer', 'superfan') DEFAULT 'discovered' NOT NULL,\n  fanScore INT DEFAULT 0 NOT NULL,\n  totalInteractions INT DEFAULT 0 NOT NULL,\n  lastInteractionAt TIMESTAMP NULL,\n  firstInteractionAt TIMESTAMP NULL,\n  lifetimeValue INT DEFAULT 0 NOT NULL,\n  purchaseCount INT DEFAULT 0 NOT NULL,\n  spotifyId VARCHAR(255),\n  appleMusicId VARCHAR(255),\n  emailOptIn BOOLEAN DEFAULT FALSE NOT NULL,\n  smsOptIn BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX artist_id_idx (artistId),\n  INDEX email_idx (email),\n  INDEX funnel_stage_idx (funnelStage),\n  INDEX fan_score_idx (fanScore),\n  INDEX discovery_source_idx (discoverySource),\n  FOREIGN KEY (artistId) REFERENCES artist_profiles(id)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2SKEMaxYovcAzrR.root --database nTbKjjzazhRpeJn9kKuXdQ --execute \n-- Fans table\nCREATE TABLE IF NOT EXISTS fans (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  artistId INT NOT NULL,\n  email VARCHAR(320),\n  phone VARCHAR(20),\n  name VARCHAR(255),\n  location VARCHAR(255),\n  country VARCHAR(2),\n  city VARCHAR(100),\n  discoverySource ENUM('spotify_playlist', 'spotify_algorithm', 'spotify_search', 'apple_music_playlist', 'apple_music_algorithm', 'apple_music_search', 'youtube', 'tiktok', 'instagram', 'twitter', 'facebook', 'friend_recommendation', 'live_show', 'radio', 'podcast', 'blog_press', 'shazam', 'bandcamp', 'soundcloud', 'other'),\n  discoveryDetail TEXT,\n  funnelStage ENUM('discovered', 'follower', 'engaged', 'customer', 'superfan') DEFAULT 'discovered' NOT NULL,\n  fanScore INT DEFAULT 0 NOT NULL,\n  totalInteractions INT DEFAULT 0 NOT NULL,\n  lastInteractionAt TIMESTAMP NULL,\n  firstInteractionAt TIMESTAMP NULL,\n  lifetimeValue INT DEFAULT 0 NOT NULL,\n  purchaseCount INT DEFAULT 0 NOT NULL,\n  spotifyId VARCHAR(255),\n  appleMusicId VARCHAR(255),\n  emailOptIn BOOLEAN DEFAULT FALSE NOT NULL,\n  smsOptIn BOOLEAN DEFAULT FALSE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX artist_id_idx (artistId),\n  INDEX email_idx (email),\n  INDEX funnel_stage_idx (funnelStage),\n  INDEX fan_score_idx (fanScore),\n  INDEX discovery_source_idx (discoverySource),\n  FOREIGN KEY (artistId) REFERENCES artist_profiles(id)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1720
}