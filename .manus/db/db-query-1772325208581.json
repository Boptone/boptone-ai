{
  "query": "\nCREATE TABLE IF NOT EXISTS `fan_wallets` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`balance` int NOT NULL DEFAULT 0,\n\t`lifetimeSpent` int NOT NULL DEFAULT 0,\n\t`lifetimeTopups` int NOT NULL DEFAULT 0,\n\t`autoReloadEnabled` boolean NOT NULL DEFAULT false,\n\t`autoReloadThreshold` int NOT NULL DEFAULT 500,\n\t`autoReloadAmount` int NOT NULL DEFAULT 2000,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`lastTopupAt` timestamp,\n\t`lastDebitAt` timestamp,\n\tCONSTRAINT `fan_wallets_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `fan_wallets_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `stream_debits` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`fanWalletId` int NOT NULL,\n\t`streamId` int NOT NULL,\n\t`trackId` int NOT NULL,\n\t`artistId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`balanceBefore` int NOT NULL,\n\t`balanceAfter` int NOT NULL,\n\t`protocolFee` int NOT NULL,\n\t`artistPayout` int NOT NULL,\n\t`processed` boolean NOT NULL DEFAULT false,\n\t`processedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `stream_debits_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `wallet_topups` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`fanWalletId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`paymentMethod` varchar(50) NOT NULL,\n\t`stripePaymentIntentId` varchar(255),\n\t`paypalTransactionId` varchar(255),\n\t`cryptoTxHash` varchar(255),\n\t`status` enum('pending','completed','failed','refunded') NOT NULL DEFAULT 'pending',\n\t`failureReason` text,\n\t`isAutoReload` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`completedAt` timestamp,\n\t`failedAt` timestamp,\n\t`refundedAt` timestamp,\n\tCONSTRAINT `wallet_topups_id` PRIMARY KEY(`id`)\n)\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2SKEMaxYovcAzrR.root --database nTbKjjzazhRpeJn9kKuXdQ --execute \nCREATE TABLE IF NOT EXISTS `fan_wallets` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`balance` int NOT NULL DEFAULT 0,\n\t`lifetimeSpent` int NOT NULL DEFAULT 0,\n\t`lifetimeTopups` int NOT NULL DEFAULT 0,\n\t`autoReloadEnabled` boolean NOT NULL DEFAULT false,\n\t`autoReloadThreshold` int NOT NULL DEFAULT 500,\n\t`autoReloadAmount` int NOT NULL DEFAULT 2000,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\t`lastTopupAt` timestamp,\n\t`lastDebitAt` timestamp,\n\tCONSTRAINT `fan_wallets_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `fan_wallets_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `stream_debits` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`fanWalletId` int NOT NULL,\n\t`streamId` int NOT NULL,\n\t`trackId` int NOT NULL,\n\t`artistId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`balanceBefore` int NOT NULL,\n\t`balanceAfter` int NOT NULL,\n\t`protocolFee` int NOT NULL,\n\t`artistPayout` int NOT NULL,\n\t`processed` boolean NOT NULL DEFAULT false,\n\t`processedAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `stream_debits_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `wallet_topups` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`fanWalletId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`paymentMethod` varchar(50) NOT NULL,\n\t`stripePaymentIntentId` varchar(255),\n\t`paypalTransactionId` varchar(255),\n\t`cryptoTxHash` varchar(255),\n\t`status` enum('pending','completed','failed','refunded') NOT NULL DEFAULT 'pending',\n\t`failureReason` text,\n\t`isAutoReload` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`completedAt` timestamp,\n\t`failedAt` timestamp,\n\t`refundedAt` timestamp,\n\tCONSTRAINT `wallet_topups_id` PRIMARY KEY(`id`)\n)\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 548
}