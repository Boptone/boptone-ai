{
  "query": "\nALTER TABLE product_reviews \nADD COLUMN IF NOT EXISTS verifiedPurchase BOOLEAN NOT NULL DEFAULT FALSE,\nADD COLUMN IF NOT EXISTS helpfulVotes INT NOT NULL DEFAULT 0,\nADD COLUMN IF NOT EXISTS unhelpfulVotes INT NOT NULL DEFAULT 0,\nADD COLUMN IF NOT EXISTS moderationNotes TEXT,\nADD COLUMN IF NOT EXISTS reviewerName VARCHAR(255),\nADD COLUMN IF NOT EXISTS reviewerLocation VARCHAR(255);\n\nALTER TABLE product_reviews \nMODIFY COLUMN status ENUM('pending', 'approved', 'rejected', 'flagged') NOT NULL DEFAULT 'approved';\n\nALTER TABLE product_reviews \nMODIFY COLUMN content TEXT NOT NULL;\n\nCREATE TABLE IF NOT EXISTS review_photos (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reviewId INT NOT NULL,\n  photoUrl VARCHAR(500) NOT NULL,\n  thumbnailUrl VARCHAR(500),\n  altText TEXT NOT NULL,\n  altTextConfidence DECIMAL(3, 2),\n  displayOrder INT NOT NULL DEFAULT 0,\n  fileSize INT,\n  mimeType VARCHAR(50),\n  width INT,\n  height INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (reviewId) REFERENCES product_reviews(id),\n  INDEX review_id_idx (reviewId),\n  INDEX display_order_idx (displayOrder)\n);\n\nCREATE TABLE IF NOT EXISTS review_helpfulness_votes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reviewId INT NOT NULL,\n  userId INT NOT NULL,\n  voteType ENUM('helpful', 'unhelpful') NOT NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (reviewId) REFERENCES product_reviews(id),\n  FOREIGN KEY (userId) REFERENCES users(id),\n  INDEX review_id_idx (reviewId),\n  INDEX user_id_idx (userId),\n  UNIQUE INDEX unique_user_review (userId, reviewId)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2SKEMaxYovcAzrR.root --database nTbKjjzazhRpeJn9kKuXdQ --execute \nALTER TABLE product_reviews \nADD COLUMN IF NOT EXISTS verifiedPurchase BOOLEAN NOT NULL DEFAULT FALSE,\nADD COLUMN IF NOT EXISTS helpfulVotes INT NOT NULL DEFAULT 0,\nADD COLUMN IF NOT EXISTS unhelpfulVotes INT NOT NULL DEFAULT 0,\nADD COLUMN IF NOT EXISTS moderationNotes TEXT,\nADD COLUMN IF NOT EXISTS reviewerName VARCHAR(255),\nADD COLUMN IF NOT EXISTS reviewerLocation VARCHAR(255);\n\nALTER TABLE product_reviews \nMODIFY COLUMN status ENUM('pending', 'approved', 'rejected', 'flagged') NOT NULL DEFAULT 'approved';\n\nALTER TABLE product_reviews \nMODIFY COLUMN content TEXT NOT NULL;\n\nCREATE TABLE IF NOT EXISTS review_photos (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reviewId INT NOT NULL,\n  photoUrl VARCHAR(500) NOT NULL,\n  thumbnailUrl VARCHAR(500),\n  altText TEXT NOT NULL,\n  altTextConfidence DECIMAL(3, 2),\n  displayOrder INT NOT NULL DEFAULT 0,\n  fileSize INT,\n  mimeType VARCHAR(50),\n  width INT,\n  height INT,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (reviewId) REFERENCES product_reviews(id),\n  INDEX review_id_idx (reviewId),\n  INDEX display_order_idx (displayOrder)\n);\n\nCREATE TABLE IF NOT EXISTS review_helpfulness_votes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reviewId INT NOT NULL,\n  userId INT NOT NULL,\n  voteType ENUM('helpful', 'unhelpful') NOT NULL,\n  createdAt TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (reviewId) REFERENCES product_reviews(id),\n  FOREIGN KEY (userId) REFERENCES users(id),\n  INDEX review_id_idx (reviewId),\n  INDEX user_id_idx (userId),\n  UNIQUE INDEX unique_user_review (userId, reviewId)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2666
}